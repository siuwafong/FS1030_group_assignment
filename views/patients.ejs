<!doctype html>
<html>
	<head>
		<%- include('partials/head'); %>
	</head>
	<body>

		<%- include('partials/header'); %>

		<main>
			<section class="container">
			<div class="container-form">

				<form method="get" class="form-inline" action="../patients/1">
					<label for="id">Health Card Number</label>
					<div class="form-group mx-sm-3 mb-2">
						<input type="text" class="form-control" placeholder="Health Card Number" name="healthCardNumber" />
					</div>
					<input type="submit" class="btn btn-primary mb-2"/>
				</form>

				<form class="form-inline" action="/admin/create">
					<button type="submit" class="btn btn-primary">Create Patient</button>
				</form>
			</div>

			<table class="table patients">
				<thead>
					<tr>
						<th>Health Card Number</th>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Age</th>
					</tr>
				</thead>

				<tbody>
					<% patientsPage.forEach((patient, index) => { %>
						<tr>
							<td><a href="../profile?healthCardNumber=<%= patient.health_card_number %>" class="<% if (patient.health_card_number.includes('No patient')) {%>disabled<%} %>"><%= patient.health_card_number %></a></td>
							<td><%= patient.first_name %></td>
							<td><%= patient.last_name %></td>
							<td><% if (patient.age !== "") {%> <%= Math.floor( ( Date.now() - patient.dob ) / (1000*60*60*24*365) ) %> <%} %></td>
						</tr>
					<% }); %>
				</tbody>
			</table>

	<span>
		<a id="previous" href="<%= currentPage - 1%>" class="<% if (currentPage === 1) {%>disabled<%} %>"> Previous </a>
		<% pageArray.forEach((page, index) => {%>
		<a href="<%= page %>" id="page<%= page %>" class="<% if (currentPage === page) {%>disabled<%} %>"> <%= page %> </a>
		<% }); %>
		<a id="next" href="<%= currentPage + 1%>" class="<% if (currentPage === pageCount) {%>disabled<%} %>"> Next </a>
	<span>

</body>
<script>

</script>
</html>
